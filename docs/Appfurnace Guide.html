<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Using ubiserver in AppFurnace</title>
</head>
<body>
<h1>Using ubiserver in AppFurnace</h1>
<p>You will need to load socket.io first, and only when it has loaded start the client, e.g.<p>
<pre>function addScriptFile(src, callback) {
    var script = document.createElement("script");
    script.type = "text/javascript";

    if (script.readyState){  //IE
        script.onreadystatechange = function(){
            if (script.readyState == "loaded" ||
                    script.readyState == "complete"){
                script.onreadystatechange = null;
                callback();
            }
        };
    } else {  //Others
        script.onload = function(){
            callback();
        };
    }
    script.src = src;
    window.document.body.appendChild(script);
}
addScriptFile("http://teaching.cs.nott.ac.uk:49891/client/libs/socket.io.min.js", 
    function() {
    	// loaded...
    });
</pre>
<p>You can use the simple client utilities in <a href="../client/client.js">client.js</a>, including:</p>
<pre>function connect(clientname,group,log,connectcallback,valuecallback)
function set(name [string], value [whatever], persistent [0|1], subclientid [undefined|''|'...'], echo [0|1]) 
function join(name [string], persistent [0|1])
function leave(name [string])</pre>
<p>The callbacks have signatures</p>
<pre>function connectcallback(ok [boolean], info [object])
function valuecallback(value [whatever])</pre>
<p>Don't forget to wait until this script is loaded too (in the above loaded callback)...</p>
<pre>addScriptFile("http://teaching.cs.nott.ac.uk:49891/client/client.js", 
    function() {
    	// loaded...
    });
</pre>
</body>
</html>